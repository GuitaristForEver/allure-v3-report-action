# PRD to Ralph Conversion Task

You are tasked with converting a Product Requirements Document (PRD) or specification into Ralph for Claude Code format.

## Input Analysis
Analyze the provided specification file and extract:
- Project goals and objectives
- Core features and requirements
- Technical constraints and preferences
- Priority levels and phases
- Success criteria

## Required Outputs

Create these files in the current directory:

### 1. PROMPT.md
Transform the PRD into Ralph development instructions:
```markdown
# Ralph Development Instructions

## Context
You are Ralph, an autonomous AI development agent working on a [PROJECT NAME] project.

## Current Objectives
[Extract and prioritize 4-6 main objectives from the PRD]

## Key Principles
- ONE task per loop - focus on the most important thing
- Search the codebase before assuming something isn't implemented
- Use subagents for expensive operations (file searching, analysis)
- Write comprehensive tests with clear documentation
- Update @fix_plan.md with your learnings
- Commit working changes with descriptive messages

## ðŸ§ª Testing Guidelines (CRITICAL)
- LIMIT testing to ~20% of your total effort per loop
- PRIORITIZE: Implementation > Documentation > Tests
- Only write tests for NEW functionality you implement
- Do NOT refactor existing tests unless broken
- Focus on CORE functionality first, comprehensive testing later

## Project Requirements
[Convert PRD requirements into clear, actionable development requirements]

## Technical Constraints
[Extract any technical preferences, frameworks, languages mentioned]

## Success Criteria
[Define what "done" looks like based on the PRD]

## Current Task
Follow @fix_plan.md and choose the most important item to implement next.
```

### 2. @fix_plan.md
Convert requirements into a prioritized task list:
```markdown
# Ralph Fix Plan

## High Priority
[Extract and convert critical features into actionable tasks]

## Medium Priority
[Secondary features and enhancements]

## Low Priority
[Nice-to-have features and optimizations]

## Completed
- [x] Project initialization

## Notes
[Any important context from the original PRD]
```

### 3. specs/requirements.md
Create detailed technical specifications:
```markdown
# Technical Specifications

[Convert PRD into detailed technical requirements including:]
- System architecture requirements
- Data models and structures
- API specifications
- User interface requirements
- Performance requirements
- Security considerations
- Integration requirements

[Preserve all technical details from the original PRD]
```

## Instructions
1. Read and analyze the attached specification file
2. Create the three files above with content derived from the PRD
3. Ensure all requirements are captured and properly prioritized
4. Make the PROMPT.md actionable for autonomous development
5. Structure @fix_plan.md with clear, implementable tasks


---

## Source PRD File: 2026-01-15-allure-v3-action-from-scratch.md

# Allure v3 Report Action - Build From Scratch

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Create a production-grade GitHub Action for Allure v3 report generation with history management

**Architecture:** Node.js-based Docker action that installs Allure v3 via npm, generates reports from test results, manages history across runs via gh-pages branch, and publishes to GitHub Pages. Reuses proven history management logic from the v2 action but simplified for a single runtime. Clean separation of concerns with entrypoint handling orchestration and Allure CLI handling report generation.

**Tech Stack:** Docker (Node.js 20), Bash, Allure v3 (npm package), GitHub Actions, GitHub Pages

---

## Task 1: Initialize new action repository structure

**Files:**
- Create: `README.md`
- Create: `.gitignore`
- Create: `action.yml`

**Step 1: Create project directory and navigate**

Run: `mkdir -p ../allure-v3-report-action && cd ../allure-v3-report-action && git init`

Expected: New git repository initialized

**Step 2: Create .gitignore**

```gitignore
# Test artifacts
allure-results/
allure-report/
allure-history/
gh-pages/

# Node
node_modules/
*.log

# OS
.DS_Store
Thumbs.db

# IDE
.idea/
.vscode/
*.swp
*.swo
```

**Step 3: Create initial README**

```markdown
# Allure v3 Report Action

Generate Allure v3 reports with history tracking for GitHub Actions.

## Status

ðŸš§ **Under Development** - Not yet ready for production use

## Features

- âœ… Allure v3 (latest npm version)
- âœ… History tracking across runs
- âœ… GitHub Pages deployment
- âœ… Customizable report names
- âœ… Multiple reports per repository (via subfolder)

## Quick Start

```yaml
- name: Generate Allure Report
  uses: yourusername/allure-v3-report-action@v1
  with:
    allure_results: allure-results
    allure_history: allure-history
```

## Documentation

Full documentation coming soon.

## License

MIT
```

**Step 4: Create basic action.yml**

```yaml
name: 'Allure v3 Report with History'
description: 'Generate Allure v3 reports with history tracking'
author: 'Your Name'
branding:
  icon: 'bar-chart-2'
  color: 'blue'

inputs:
  allure_results:
    description: 'Path to Allure test results directory'
    required: true
    default: 'allure-results'

  allure_report:
    description: 'Path where Allure will write the generated report'
    required: true
    default: 'allure-report'

  gh_pages:
    description: 'Path to gh-pages branch checkout'
    required: true
    default: 'gh-pages'

  allure_history:
    description: 'Path for allure history publication'
    required: true
    default: 'allure-history'

  subfolder:
    description: 'Subfolder for multiple reports in same repo'
    required: false
    default: ''

  keep_reports:
    description: 'Number of previous reports to keep'
    required: false
    default: '20'

  report_name:
    description: 'Custom report title'
    required: false
    default: 'Allure Report'

  github_run_num:
    description: 'GitHub Actions run number'
    required: true
    default: ${{ github.run_number }}

  github_run_id:
    description: 'GitHub Actions run id'
    required: true
    default: ${{ github.run_id }}

  github_repo:
    description: 'GitHub repository'
    required: true
    default: ${{ github.repository }}

  github_repo_owner:
    description: 'GitHub repository owner'
    required: true
    default: ${{ github.repository_owner }}

  github_tests_repo:
    description: 'Repository where tests are run'
    required: true
    default: ${{ github.repository }}

  report_url:
    description: 'Custom URL instead of *.github.io'
    required: false
    default: ''

  github_server_url:
    description: 'GitHub server URL'
    required: true
    default: ${{ github.server_url }}

runs:
  using: 'docker'
  image: 'Dockerfile'
```

**Step 5: Commit initial structure**

```bash
git add .
git commit -m "chore: initialize action structure with basic configuration"
```

---

## Task 2: Create Dockerfile with Node.js and Allure v3

**Files:**
- Create: `Dockerfile`

**Step 1: Write Dockerfile**

```dockerfile
FROM node:20-slim

# Install Allure v3 CLI globally
ARG ALLURE_VERSION=3.0.1
RUN npm install -g allure@${ALLURE_VERSION}

# Set up working directory
ENV ROOT=/app
WORKDIR $ROOT

# Copy entrypoint script
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
```

**Step 2: Test Docker build locally**

Run: `docker build --build-arg ALLURE_VERSION=3.0.1 -t allure-v3-action:test .`

Expected: Build should fail because entrypoint.sh doesn't exist yet (that's okay)

**Step 3: Create placeholder entrypoint for testing**

```bash
echo '#!/bin/bash
echo "Allure v3 Action - Entrypoint loaded"
allure --version' > entrypoint.sh
chmod +x entrypoint.sh
```

**Step 4: Test Docker build again**

Run: `docker build --build-arg ALLURE_VERSION=3.0.1 -t allure-v3-action:test .`

Expected: Build succeeds, showing Allure v3.0.1 installed

**Step 5: Test Docker run**

Run: `docker run --rm allure-v3-action:test`

Expected: Shows "Allure v3 Action - Entrypoint loaded" and Allure version

**Step 6: Commit Dockerfile**

```bash
git add Dockerfile entrypoint.sh
git commit -m "feat: add Dockerfile with Node.js 20 and Allure v3"
```

---

## Task 3: Implement core entrypoint script

**Files:**
- Modify: `entrypoint.sh`

**Step 1: Write complete entrypoint script**

Replace entrypoint.sh content with:

```bash
#!/usr/bin/env bash
set -e

echo "ðŸš€ Allure v3 Report Action"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Create necessary directories
mkdir -p "./${INPUT_GH_PAGES}"
mkdir -p "./${INPUT_ALLURE_HISTORY}"

# Copy existing history
echo "ðŸ“‚ Copying existing history..."
cp -r "./${INPUT_GH_PAGES}/." "./${INPUT_ALLURE_HISTORY}"

# Extract repository information
REPOSITORY_OWNER_SLASH_NAME=${INPUT_GITHUB_REPO}
REPOSITORY_NAME=${REPOSITORY_OWNER_SLASH_NAME##*/}
GITHUB_PAGES_WEBSITE_URL="https://${INPUT_GITHUB_REPO_OWNER}.github.io/${REPOSITORY_NAME}"

# Handle subfolder configuration
if [[ ${INPUT_SUBFOLDER} != '' ]]; then
    INPUT_ALLURE_HISTORY="${INPUT_ALLURE_HISTORY}/${INPUT_SUBFOLDER}"
    INPUT_GH_PAGES="${INPUT_GH_PAGES}/${INPUT_SUBFOLDER}"
    echo "ðŸ“ Using subfolder: ${INPUT_SUBFOLDER}"
    mkdir -p "./${INPUT_ALLURE_HISTORY}"
    GITHUB_PAGES_WEBSITE_URL="${GITHUB_PAGES_WEBSITE_URL}/${INPUT_SUBFOLDER}"
fi

# Handle custom report URL
if [[ ${INPUT_REPORT_URL} != '' ]]; then
    GITHUB_PAGES_WEBSITE_URL="${INPUT_REPORT_URL}"
    echo "ðŸ”— Using custom URL: ${GITHUB_PAGES_WEBSITE_URL}"
fi

# Clean up old reports
COUNT=$(ls "./${INPUT_ALLURE_HISTORY}" 2>/dev/null | wc -l || echo "0")
echo "ðŸ“Š Current report count: ${COUNT}"
INPUT_KEEP_REPORTS=$((INPUT_KEEP_REPORTS + 1))

if (( COUNT > INPUT_KEEP_REPORTS )); then
    echo "ðŸ§¹ Cleaning old reports (keeping ${INPUT_KEEP_REPORTS})..."
    cd "./${INPUT_ALLURE_HISTORY}"
    rm -f index.html last-history
    ls | sort -n | grep -v 'CNAME' | head -n -$((INPUT_KEEP_REPORTS - 2)) | xargs rm -rf
    cd "${GITHUB_WORKSPACE}"
fi

# Generate index.html redirect
echo "ðŸ“ Creating index.html redirect..."
cat > "./${INPUT_ALLURE_HISTORY}/index.html" << EOF
<!DOCTYPE html>
<meta charset="utf-8">
<meta http-equiv="refresh" content="0; URL=${GITHUB_PAGES_WEBSITE_URL}/${INPUT_GITHUB_RUN_NUM}/index.html">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>Redirecting to latest report...</title>
<body>
<p>Redirecting to <a href="${GITHUB_PAGES_WEBSITE_URL}/${INPUT_GITHUB_RUN_NUM}/index.html">latest report</a>...</p>
</body>
EOF

# Create executor.json for Allure
echo "âš™ï¸  Creating executor.json..."
[ -z "$INPUT_REPORT_NAME" ] && INPUT_REPORT_NAME="Allure Report"

cat > executor.json << EOF
{
  "name": "GitHub Actions",
  "type": "github",
  "reportName": "${INPUT_REPORT_NAME}",
  "url": "${GITHUB_PAGES_WEBSITE_URL}",
  "reportUrl": "${GITHUB_PAGES_WEBSITE_URL}/${INPUT_GITHUB_RUN_NUM}",
  "buildUrl": "${INPUT_GITHUB_SERVER_URL}/${INPUT_GITHUB_TESTS_REPO}/actions/runs/${INPUT_GITHUB_RUN_ID}",
  "buildName": "GitHub Actions Run #${INPUT_GITHUB_RUN_ID}",
  "buildOrder": "${INPUT_GITHUB_RUN_NUM}"
}
EOF

mv executor.json "./${INPUT_ALLURE_RESULTS}/"

# Copy previous history into results
echo "ðŸ“œ Restoring previous run history..."
cp -r "./${INPUT_GH_PAGES}/last-history/." "./${INPUT_ALLURE_RESULTS}/history" 2>/dev/null || echo "No previous history found"

# Generate Allure report
echo "ðŸŽ¨ Generating Allure v3 report..."
echo "   Results: ${INPUT_ALLURE_RESULTS}"
echo "   Output:  ${INPUT_ALLURE_REPORT}"

allure generate --clean "${INPUT_ALLURE_RESULTS}" -o "${INPUT_ALLURE_REPORT}"

# Copy report to history location
echo "ðŸ’¾ Copying report to history..."
cp -r "./${INPUT_ALLURE_REPORT}/." "./${INPUT_ALLURE_HISTORY}/${INPUT_GITHUB_RUN_NUM}"

# Save history for next run
echo "ðŸ’¾ Saving history for next run..."
mkdir -p "./${INPUT_ALLURE_HISTORY}/last-history"
cp -r "./${INPUT_ALLURE_REPORT}/history/." "./${INPUT_ALLURE_HISTORY}/last-history"

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… Report generated successfully!"
echo "ðŸ“ Report location: ${INPUT_ALLURE_HISTORY}/${INPUT_GITHUB_RUN_NUM}"
echo "ðŸŒ Will be available at: ${GITHUB_PAGES_WEBSITE_URL}/${INPUT_GITHUB_RUN_NUM}"
```

**Step 2: Make entrypoint executable**

Run: `chmod +x entrypoint.sh`

**Step 3: Verify script syntax**

Run: `bash -n entrypoint.sh`

Expected: No syntax errors

**Step 4: Commit entrypoint**

```bash
git add entrypoint.sh
git commit -m "feat: implement complete entrypoint with history management"
```

---

## Task 4: Create test workflow for local action

**Files:**
- Create: `.github/workflows/test-local.yml`

**Step 1: Create workflows directory**

Run: `mkdir -p .github/workflows`

**Step 2: Create test workflow**

```yaml
name: Test Local Action

on:
  push:
    branches:
      - main
      - develop
  pull_request:
  workflow_dispatch:

jobs:
  test-action:
    name: Test Allure v3 Action
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Create sample test results
        run: |
          mkdir -p allure-results

          # Create sample passing test
          cat > allure-results/test-pass.json << 'EOF'
          {
            "uuid": "test-uuid-pass",
            "name": "Sample Passing Test",
            "status": "passed",
            "stage": "finished",
            "description": "This is a sample passing test",
            "start": 1704067200000,
            "stop": 1704067205000,
            "labels": [
              {"name": "feature", "value": "Authentication"},
              {"name": "severity", "value": "critical"}
            ]
          }
          EOF

          # Create sample failing test
          cat > allure-results/test-fail.json << 'EOF'
          {
            "uuid": "test-uuid-fail",
            "name": "Sample Failing Test",
            "status": "failed",
            "stage": "finished",
            "description": "This is a sample failing test",
            "start": 1704067210000,
            "stop": 1704067215000,
            "statusDetails": {
              "message": "Expected value to be true but got false",
              "trace": "AssertionError: Expected value to be true but got false\n    at Test.run (test.js:15:10)"
            },
            "labels": [
              {"name": "feature", "value": "Payment"},
              {"name": "severity", "value": "normal"}
            ]
          }
          EOF

          # Create sample skipped test
          cat > allure-results/test-skip.json << 'EOF'
          {
            "uuid": "test-uuid-skip",
            "name": "Sample Skipped Test",
            "status": "skipped",
            "stage": "finished",
            "description": "This test was skipped",
            "start": 1704067220000,
            "stop": 1704067220100,
            "statusDetails": {
              "message": "Test skipped due to configuration"
            },
            "labels": [
              {"name": "feature", "value": "Reporting"}
            ]
          }
          EOF

          echo "âœ… Created 3 sample test results"

      - name: Get Allure history
        uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - name: Generate Allure Report
        uses: ./
        with:
          allure_results: allure-results
          allure_history: allure-history
          allure_report: allure-report
          report_name: 'Test Report - Allure v3'
          keep_reports: 20

      - name: Verify report structure
        run: |
          echo "ðŸ” Verifying generated report structure..."

          if [ ! -d "allure-history" ]; then
            echo "âŒ allure-history directory not created"
            exit 1
          fi

          if [ ! -f "allure-history/index.html" ]; then
            echo "âŒ index.html not created"
            exit 1
          fi

          if [ ! -d "allure-history/${{ github.run_number }}" ]; then
            echo "âŒ Report directory for run ${{ github.run_number }} not created"
            exit 1
          fi

          if [ ! -d "allure-history/last-history" ]; then
            echo "âŒ last-history directory not created"
            exit 1
          fi

          echo "âœ… All expected directories and files present"
          echo "ðŸ“ Report structure:"
          ls -la allure-history/

      - name: Deploy to GitHub Pages
        if: github.ref == 'refs/heads/main'
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_branch: gh-pages
          publish_dir: allure-history
          keep_files: true

      - name: Post report link
        if: always()
        run: |
          REPORT_URL="https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/${{ github.run_number }}"
          echo "ðŸ“Š Report will be available at: ${REPORT_URL}"
```

**Step 3: Commit workflow**

```bash
git add .github/workflows/test-local.yml
git commit -m "test: add workflow to test action locally"
```

---

## Task 5: Create comprehensive documentation

**Files:**
- Modify: `README.md`
- Create: `docs/USAGE.md`
- Create: `docs/EXAMPLES.md`

**Step 1: Update README.md**

Replace README.md content:

```markdown
# Allure v3 Report Action ðŸŽ¯

[![Test Action](https://github.com/yourusername/allure-v3-report-action/actions/workflows/test-local.yml/badge.svg)](https://github.com/yourusername/allure-v3-report-action/actions/workflows/test-local.yml)

Generate beautiful Allure v3 test reports with history tracking in GitHub Actions.

## âœ¨ Features

- ðŸŽ¨ **Allure v3** - Latest generation of Allure reporting framework
- ðŸ“Š **History Tracking** - Maintain test trends across runs
- ðŸš€ **GitHub Pages** - Easy deployment to gh-pages
- ðŸ“ **Multiple Reports** - Support multiple projects via subfolders
- ðŸŽ¯ **Zero Config** - Works out of the box with sensible defaults
- ðŸ”§ **Customizable** - Full control over report names and URLs

## ðŸš€ Quick Start

```yaml
name: Tests with Allure Report

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # Run your tests and generate allure-results
      - name: Run tests
        run: npm test  # or your test command

      # Get previous report history
      - name: Get Allure history
        uses: actions/checkout@v4
        if: always()
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      # Generate report
      - name: Generate Allure Report
        uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: allure-results
          allure_history: allure-history

      # Publish to GitHub Pages
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v4
        if: always()
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_branch: gh-pages
          publish_dir: allure-history
```

## ðŸ“‹ Inputs

| Input | Description | Required | Default |
|-------|-------------|----------|---------|
| `allure_results` | Path to Allure test results | Yes | `allure-results` |
| `allure_report` | Path for generated report | Yes | `allure-report` |
| `allure_history` | Path for history publication | Yes | `allure-history` |
| `gh_pages` | Path to gh-pages checkout | Yes | `gh-pages` |
| `report_name` | Custom report title | No | `Allure Report` |
| `subfolder` | Subfolder for multiple reports | No | `''` |
| `keep_reports` | Number of reports to keep | No | `20` |
| `report_url` | Custom URL override | No | `''` |

For all inputs and advanced configuration, see [USAGE.md](docs/USAGE.md).

## ðŸ“– Examples

### Basic Usage
```yaml
- uses: yourusername/allure-v3-report-action@v1
  with:
    allure_results: test-results
    allure_history: reports
```

### Multiple Reports
```yaml
# iOS tests
- uses: yourusername/allure-v3-report-action@v1
  with:
    allure_results: ios-results
    allure_history: allure-history
    subfolder: ios
    report_name: iOS Tests

# Android tests
- uses: yourusername/allure-v3-report-action@v1
  with:
    allure_results: android-results
    allure_history: allure-history
    subfolder: android
    report_name: Android Tests
```

See [EXAMPLES.md](docs/EXAMPLES.md) for more use cases.

## ðŸ”„ Migration from Allure v2

If you're using `simple-elf/allure-report-action`, migration is simple:

**Before:**
```yaml
- uses: simple-elf/allure-report-action@master
  with:
    allure_results: allure-results
```

**After:**
```yaml
- uses: yourusername/allure-v3-report-action@v1
  with:
    allure_results: allure-results
```

Your existing history will be preserved automatically.

## ðŸŽ¯ Why Allure v3?

- **Modern Architecture** - Built with TypeScript, plugin-based design
- **Better Performance** - Faster report generation
- **Enhanced Visuals** - New "Awesome" theme with better charts
- **Active Development** - Latest features and improvements
- **v2 Compatible** - Reads Allure v2 test results format

## ðŸ“Š Live Examples

- [Example Report](https://yourusername.github.io/allure-v3-report-action/)

## ðŸ› ï¸ Development

```bash
# Clone repository
git clone https://github.com/yourusername/allure-v3-report-action.git
cd allure-v3-report-action

# Build Docker image
docker build -t allure-v3-action .

# Test locally
docker run --rm \
  -e INPUT_ALLURE_RESULTS=allure-results \
  -e INPUT_ALLURE_REPORT=allure-report \
  -v $(pwd):/app \
  allure-v3-action
```

## ðŸ¤ Contributing

Contributions welcome! Please read [CONTRIBUTING.md](CONTRIBUTING.md) first.

## ðŸ“„ License

MIT Â© [Your Name]

## ðŸ™ Acknowledgments

- Inspired by [simple-elf/allure-report-action](https://github.com/simple-elf/allure-report-action)
- Built with [Allure Framework](https://github.com/allure-framework/allure3)

## ðŸ“š Resources

- [Allure v3 Documentation](https://github.com/allure-framework/allure3)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Creating GitHub Actions](https://docs.github.com/en/actions/creating-actions)
```

**Step 2: Create USAGE.md**

```markdown
# Usage Guide

## Input Parameters

### Required Inputs

#### `allure_results`
Path to the directory containing Allure test results.

**Default:** `allure-results`

```yaml
with:
  allure_results: build/test-results
```

#### `allure_report`
Path where Allure will write the generated HTML report.

**Default:** `allure-report`

```yaml
with:
  allure_report: build/reports/allure
```

#### `allure_history`
Path for publishing the report history to GitHub Pages.

**Default:** `allure-history`

```yaml
with:
  allure_history: docs/reports
```

#### `gh_pages`
Path to the checked-out gh-pages branch (for history).

**Default:** `gh-pages`

```yaml
with:
  gh_pages: gh-pages
```

### Optional Inputs

#### `report_name`
Custom title for your Allure report.

**Default:** `Allure Report`

```yaml
with:
  report_name: 'E2E Test Results - Production'
```

#### `subfolder`
Use subfolders to host multiple independent reports in the same repository.

**Default:** `''` (empty)

```yaml
# iOS report at: https://user.github.io/repo/ios/
with:
  subfolder: ios

# Android report at: https://user.github.io/repo/android/
with:
  subfolder: android
```

#### `keep_reports`
Number of previous reports to retain for history.

**Default:** `20`

```yaml
with:
  keep_reports: 50  # Keep last 50 reports
```

#### `report_url`
Override the default GitHub Pages URL with a custom domain.

**Default:** `''` (uses github.io URL)

```yaml
with:
  report_url: 'https://reports.example.com'
```

## Complete Example

```yaml
- name: Generate Allure Report
  uses: yourusername/allure-v3-report-action@v1
  if: always()
  with:
    # Paths
    allure_results: test-output/allure-results
    allure_report: allure-report
    allure_history: allure-history
    gh_pages: gh-pages

    # Customization
    report_name: 'Integration Tests - ${{ github.ref_name }}'
    subfolder: integration
    keep_reports: 30

    # GitHub context (usually use defaults)
    github_run_num: ${{ github.run_number }}
    github_run_id: ${{ github.run_id }}
    github_repo: ${{ github.repository }}
```

## History Management

The action automatically manages test history:

1. **Fetches** previous history from gh-pages branch
2. **Merges** with current test results
3. **Generates** report with trends
4. **Cleans** old reports based on `keep_reports`
5. **Saves** history for next run

### Setting Up History

First run (no gh-pages branch yet):

```yaml
- name: Get Allure history
  uses: actions/checkout@v4
  continue-on-error: true  # Important! Branch might not exist yet
  with:
    ref: gh-pages
    path: gh-pages
```

The `continue-on-error: true` ensures the workflow continues even if gh-pages doesn't exist.

## GitHub Pages Setup

1. Create the gh-pages branch (automatically created on first deploy)
2. Enable GitHub Pages in repository settings
3. Set source to gh-pages branch

Your reports will be available at:
```
https://<username>.github.io/<repository>/
```

With subfolders:
```
https://<username>.github.io/<repository>/<subfolder>/
```

## Troubleshooting

### Report not showing history
- Ensure gh-pages checkout step has `continue-on-error: true`
- Verify `last-history` directory exists in gh-pages branch
- Check that `keep_reports` is not 0

### Reports overwriting each other
- Use different `subfolder` values for different test suites
- Ensure unique `github_run_num` (defaults should work)

### Large repository size
- Reduce `keep_reports` value
- Use `subfolder` to separate old reports
- Consider periodically cleaning gh-pages branch
```

**Step 3: Create EXAMPLES.md**

```markdown
# Usage Examples

## Basic Configuration

### Minimal Setup

```yaml
- uses: yourusername/allure-v3-report-action@v1
  with:
    allure_results: allure-results
    allure_history: allure-history
```

### With History

```yaml
- name: Get Allure history
  uses: actions/checkout@v4
  continue-on-error: true
  with:
    ref: gh-pages
    path: gh-pages

- name: Generate Report
  uses: yourusername/allure-v3-report-action@v1
  with:
    allure_results: allure-results
    allure_history: allure-history
    gh_pages: gh-pages

- name: Deploy to GitHub Pages
  uses: peaceiris/actions-gh-pages@v4
  with:
    github_token: ${{ secrets.GITHUB_TOKEN }}
    publish_branch: gh-pages
    publish_dir: allure-history
```

## Advanced Configurations

### Multiple Test Suites

```yaml
jobs:
  test-frontend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Run frontend tests
        run: npm run test:frontend

      - uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: frontend/allure-results
          allure_history: allure-history
          subfolder: frontend
          report_name: Frontend Tests

  test-backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Run backend tests
        run: npm run test:backend

      - uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: backend/allure-results
          allure_history: allure-history
          subfolder: backend
          report_name: Backend Tests
```

### Mobile Testing (iOS + Android)

```yaml
jobs:
  test-ios:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4

      - name: Run iOS tests
        run: fastlane test

      - uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: ios/test-results
          allure_history: allure-history
          subfolder: ios
          report_name: iOS Tests
          keep_reports: 10

  test-android:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Run Android tests
        run: ./gradlew test

      - uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: app/build/allure-results
          allure_history: allure-history
          subfolder: android
          report_name: Android Tests
          keep_reports: 10
```

### Matrix Strategy

```yaml
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node: [18, 20, 22]
        browser: [chrome, firefox]

    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node }}

      - name: Run tests
        run: npm test
        env:
          BROWSER: ${{ matrix.browser }}

      - uses: actions/checkout@v4
        if: always()
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: allure-results
          allure_history: allure-history
          subfolder: node${{ matrix.node }}-${{ matrix.browser }}
          report_name: Node ${{ matrix.node }} - ${{ matrix.browser }}
```

### Custom Domain

```yaml
- uses: yourusername/allure-v3-report-action@v1
  with:
    allure_results: allure-results
    allure_history: allure-history
    report_url: 'https://reports.mycompany.com'
    report_name: 'Production E2E Tests'
```

### Pull Request Reports

```yaml
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Run tests
        run: npm test

      - uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: allure-results
          allure_history: allure-history
          subfolder: pr-${{ github.event.pull_request.number }}
          report_name: 'PR #${{ github.event.pull_request.number }}'

      - name: Comment PR
        if: always()
        uses: actions/github-script@v7
        with:
          script: |
            const reportUrl = `https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/pr-${{ github.event.pull_request.number }}/${{ github.run_number }}`;
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `ðŸ“Š Allure Report: ${reportUrl}`
            });
```

### Scheduled Regression Tests

```yaml
on:
  schedule:
    - cron: '0 2 * * *'  # Daily at 2 AM

jobs:
  regression:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Run regression suite
        run: npm run test:regression

      - uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: regression-results
          allure_history: allure-history
          subfolder: regression
          report_name: 'Nightly Regression - ${{ github.run_number }}'
          keep_reports: 30  # Keep 30 days of history
```

### Monorepo with Multiple Projects

```yaml
jobs:
  test-all:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        project:
          - name: api
            path: packages/api
          - name: web
            path: packages/web
          - name: mobile
            path: packages/mobile

    steps:
      - uses: actions/checkout@v4

      - name: Test ${{ matrix.project.name }}
        working-directory: ${{ matrix.project.path }}
        run: npm test

      - uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - uses: yourusername/allure-v3-report-action@v1
        if: always()
        with:
          allure_results: ${{ matrix.project.path }}/allure-results
          allure_history: allure-history
          subfolder: ${{ matrix.project.name }}
          report_name: ${{ matrix.project.name }} Tests
```

## Integration Examples

### With Playwright

```yaml
- name: Run Playwright tests
  run: npx playwright test --reporter=allure-playwright

- uses: yourusername/allure-v3-report-action@v1
  if: always()
  with:
    allure_results: allure-results
    allure_history: allure-history
    report_name: Playwright E2E Tests
```

### With Jest

```yaml
- name: Run Jest with Allure
  run: npm test -- --reporters=jest-allure

- uses: yourusername/allure-v3-report-action@v1
  if: always()
  with:
    allure_results: allure-results
    allure_history: allure-history
    report_name: Jest Unit Tests
```

### With Cypress

```yaml
- name: Run Cypress tests
  run: npx cypress run --reporter=mocha-allure-reporter

- uses: yourusername/allure-v3-report-action@v1
  if: always()
  with:
    allure_results: cypress/allure-results
    allure_history: allure-history
    report_name: Cypress E2E Tests
```
```

**Step 4: Commit documentation**

```bash
mkdir -p docs
git add README.md docs/
git commit -m "docs: add comprehensive documentation and examples"
```

---

## Task 6: Add LICENSE and CONTRIBUTING files

**Files:**
- Create: `LICENSE`
- Create: `CONTRIBUTING.md`

**Step 1: Create MIT LICENSE**

```text
MIT License

Copyright (c) 2026 [Your Name]

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

**Step 2: Create CONTRIBUTING.md**

```markdown
# Contributing to Allure v3 Report Action

Thank you for considering contributing! ðŸŽ‰

## How to Contribute

### Reporting Bugs

Open an issue with:
- Clear description of the problem
- Steps to reproduce
- Expected vs actual behavior
- Environment (OS, GitHub Actions runner)
- Sample workflow YAML

### Suggesting Features

Open an issue describing:
- Use case and motivation
- Proposed solution
- Alternative approaches considered

### Submitting Pull Requests

1. **Fork** the repository
2. **Create** a feature branch (`git checkout -b feature/amazing-feature`)
3. **Make** your changes
4. **Test** locally with Docker
5. **Commit** with clear messages (`git commit -m 'feat: add amazing feature'`)
6. **Push** to your fork (`git push origin feature/amazing-feature`)
7. **Open** a Pull Request

## Development Setup

```bash
# Clone your fork
git clone https://github.com/yourusername/allure-v3-report-action.git
cd allure-v3-report-action

# Build Docker image
docker build -t allure-v3-action:dev .

# Test locally
mkdir -p allure-results
echo '{"uuid":"test","name":"Test","status":"passed","stage":"finished"}' > allure-results/test.json

docker run --rm \
  -e INPUT_ALLURE_RESULTS=allure-results \
  -e INPUT_ALLURE_REPORT=allure-report \
  -e INPUT_GH_PAGES=gh-pages \
  -e INPUT_ALLURE_HISTORY=allure-history \
  -e INPUT_KEEP_REPORTS=20 \
  -e INPUT_GITHUB_RUN_NUM=1 \
  -e INPUT_GITHUB_RUN_ID=1 \
  -e INPUT_GITHUB_REPO=test/repo \
  -e INPUT_GITHUB_REPO_OWNER=test \
  -e INPUT_GITHUB_TESTS_REPO=test/repo \
  -e INPUT_GITHUB_SERVER_URL=https://github.com \
  -e INPUT_SUBFOLDER='' \
  -e INPUT_REPORT_URL='' \
  -e INPUT_REPORT_NAME='Test Report' \
  -v $(pwd):/app \
  allure-v3-action:dev
```

## Commit Message Guidelines

Follow [Conventional Commits](https://www.conventionalcommits.org/):

- `feat:` New feature
- `fix:` Bug fix
- `docs:` Documentation changes
- `test:` Adding or updating tests
- `chore:` Maintenance tasks
- `refactor:` Code refactoring

Examples:
```
feat: add support for custom Allure plugins
fix: history not preserved with subfolder
docs: update README with new examples
```

## Testing

Test your changes with:

1. **Local Docker test** (see above)
2. **Workflow test** - Push to your fork and check Actions tab
3. **Integration test** - Use in a real project

## Code Style

- Use **bash best practices**
- Add **comments** for complex logic
- Keep **functions small** and focused
- **Validate inputs** before use
- Handle **errors gracefully**

## Questions?

Open an issue or discussion if you need help!
```

**Step 3: Commit license and contributing guide**

```bash
git add LICENSE CONTRIBUTING.md
git commit -m "chore: add LICENSE and CONTRIBUTING guide"
```

---

## Task 7: Create example workflows for different use cases

**Files:**
- Create: `.github/workflows/example-basic.yml`
- Create: `.github/workflows/example-matrix.yml`

**Step 1: Create basic example**

```yaml
name: Example - Basic Usage

on:
  workflow_dispatch:

jobs:
  test-basic:
    name: Basic Allure Report
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create test results
        run: |
          mkdir -p allure-results
          cat > allure-results/basic-test.json << 'EOF'
          {
            "uuid": "basic-test-1",
            "name": "Basic Test Example",
            "status": "passed",
            "stage": "finished",
            "start": 1704067200000,
            "stop": 1704067210000
          }
          EOF

      - name: Get history
        uses: actions/checkout@v4
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - name: Generate report
        uses: ./
        with:
          allure_results: allure-results
          allure_history: allure-history

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_branch: gh-pages
          publish_dir: allure-history
```

**Step 2: Create matrix example**

```yaml
name: Example - Matrix Strategy

on:
  workflow_dispatch:

jobs:
  test-matrix:
    name: Test on ${{ matrix.os }} - Node ${{ matrix.node }}
    runs-on: ${{ matrix.os }}

    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        node: [18, 20]

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node }}

      - name: Create test results
        run: |
          mkdir -p allure-results
          cat > allure-results/test-${{ matrix.os }}-node${{ matrix.node }}.json << 'EOF'
          {
            "uuid": "${{ matrix.os }}-node${{ matrix.node }}",
            "name": "Test on ${{ matrix.os }} with Node ${{ matrix.node }}",
            "status": "passed",
            "stage": "finished",
            "start": 1704067200000,
            "stop": 1704067210000,
            "labels": [
              {"name": "os", "value": "${{ matrix.os }}"},
              {"name": "node", "value": "${{ matrix.node }}"}
            ]
          }
          EOF
        shell: bash

      - name: Get history
        uses: actions/checkout@v4
        if: matrix.os == 'ubuntu-latest' && matrix.node == 20
        continue-on-error: true
        with:
          ref: gh-pages
          path: gh-pages

      - name: Generate report
        if: matrix.os == 'ubuntu-latest' && matrix.node == 20
        uses: ./
        with:
          allure_results: allure-results
          allure_history: allure-history
          subfolder: matrix-tests
          report_name: Matrix Test Results

      - name: Deploy
        if: matrix.os == 'ubuntu-latest' && matrix.node == 20
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_branch: gh-pages
          publish_dir: allure-history
```

**Step 3: Commit examples**

```bash
git add .github/workflows/example-*.yml
git commit -m "docs: add example workflows for common use cases"
```

---

## Task 8: Test the action end-to-end

**Files:**
- N/A (testing only)

**Step 1: Build and test Docker image**

Run:
```bash
docker build -t allure-v3-action:local .
```

Expected: Build succeeds with Allure v3.0.1 installed

**Step 2: Create realistic test data**

Run:
```bash
mkdir -p allure-results

# Create multiple test results
for i in {1..5}; do
  cat > allure-results/test-$i.json << EOF
{
  "uuid": "test-uuid-$i",
  "name": "Test Case $i",
  "status": "$([ $((i % 3)) -eq 0 ] && echo 'failed' || echo 'passed')",
  "stage": "finished",
  "description": "Sample test case number $i",
  "start": $((1704067200000 + i * 1000)),
  "stop": $((1704067200000 + i * 1000 + 5000)),
  "labels": [
    {"name": "feature", "value": "Feature $((i % 2 + 1))"},
    {"name": "severity", "value": "$([ $((i % 2)) -eq 0 ] && echo 'critical' || echo 'normal')"}
  ]
}
EOF
done
```

Expected: 5 test result files created

**Step 3: Run Docker container locally**

Run:
```bash
mkdir -p gh-pages

docker run --rm \
  -e INPUT_ALLURE_RESULTS=allure-results \
  -e INPUT_ALLURE_REPORT=allure-report \
  -e INPUT_GH_PAGES=gh-pages \
  -e INPUT_ALLURE_HISTORY=allure-history \
  -e INPUT_KEEP_REPORTS=20 \
  -e INPUT_GITHUB_RUN_NUM=1 \
  -e INPUT_GITHUB_RUN_ID=12345 \
  -e INPUT_GITHUB_REPO=test/allure-v3-action \
  -e INPUT_GITHUB_REPO_OWNER=testuser \
  -e INPUT_GITHUB_TESTS_REPO=test/allure-v3-action \
  -e INPUT_GITHUB_SERVER_URL=https://github.com \
  -e INPUT_SUBFOLDER='' \
  -e INPUT_REPORT_URL='' \
  -e INPUT_REPORT_NAME='Local Test Report' \
  -v $(pwd):/app \
  allure-v3-action:local
```

Expected:
- Report generated successfully
- Shows "âœ… Report generated successfully!"
- No errors in output

**Step 4: Verify report structure**

Run:
```bash
ls -la allure-history/
ls -la allure-history/1/
cat allure-history/index.html
```

Expected:
- `allure-history/` directory exists
- `allure-history/1/` contains report
- `allure-history/index.html` has redirect
- `allure-history/last-history/` contains history data

**Step 5: Test with history (second run)**

Run:
```bash
# Copy history to simulate gh-pages
cp -r allure-history/last-history gh-pages/

# Run again with run number 2
docker run --rm \
  -e INPUT_ALLURE_RESULTS=allure-results \
  -e INPUT_ALLURE_REPORT=allure-report \
  -e INPUT_GH_PAGES=gh-pages \
  -e INPUT_ALLURE_HISTORY=allure-history \
  -e INPUT_KEEP_REPORTS=20 \
  -e INPUT_GITHUB_RUN_NUM=2 \
  -e INPUT_GITHUB_RUN_ID=12346 \
  -e INPUT_GITHUB_REPO=test/allure-v3-action \
  -e INPUT_GITHUB_REPO_OWNER=testuser \
  -e INPUT_GITHUB_TESTS_REPO=test/allure-v3-action \
  -e INPUT_GITHUB_SERVER_URL=https://github.com \
  -e INPUT_SUBFOLDER='' \
  -e INPUT_REPORT_URL='' \
  -e INPUT_REPORT_NAME='Local Test Report Run 2' \
  -v $(pwd):/app \
  allure-v3-action:local
```

Expected:
- Run 2 report includes history from run 1
- Both `allure-history/1/` and `allure-history/2/` exist
- Trends show data from both runs

**Step 6: Clean up test artifacts**

Run: `rm -rf allure-results allure-report allure-history gh-pages`

---

## Task 9: Prepare for GitHub marketplace publication

**Files:**
- Modify: `action.yml`
- Create: `.github/workflows/release.yml`
- Create: `CHANGELOG.md`

**Step 1: Update action.yml with marketplace metadata**

Update the branding and author in action.yml:

```yaml
name: 'Allure v3 Report with History'
description: 'Generate Allure v3 reports with history tracking and GitHub Pages deployment'
author: 'Your GitHub Username'

branding:
  icon: 'bar-chart-2'
  color: 'blue'
```

**Step 2: Create release workflow**

```yaml
name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    name: Create Release
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          generate_release_notes: true
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

**Step 3: Create CHANGELOG.md**

```markdown
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.0.0] - 2026-01-15

### Added
- Initial release of Allure v3 Report Action
- Support for Allure v3 (npm package)
- History tracking across workflow runs
- GitHub Pages deployment integration
- Multiple reports via subfolder support
- Customizable report names
- Configurable report retention (keep_reports)
- Custom URL support
- Comprehensive documentation and examples

### Features
- Node.js 20-based Docker container
- Automatic history management
- Old report cleanup
- Executor metadata injection
- Index redirect generation
- Full compatibility with Allure v3.0.1

## [Unreleased]

Nothing yet!

---

## Release Types

- **Major (X.0.0)**: Breaking changes
- **Minor (x.X.0)**: New features, backward compatible
- **Patch (x.x.X)**: Bug fixes, backward compatible
```

**Step 4: Commit marketplace preparation**

```bash
git add action.yml .github/workflows/release.yml CHANGELOG.md
git commit -m "chore: prepare for marketplace publication"
```

**Step 5: Push to GitHub**

Run:
```bash
# Create GitHub repository first (via web or gh CLI)
gh repo create allure-v3-report-action --public --source=. --remote=origin

# Push code
git branch -M main
git push -u origin main
```

Expected: Repository created and code pushed

**Step 6: Create first release**

Run:
```bash
git tag -a v1.0.0 -m "Release v1.0.0 - Initial release with Allure v3 support"
git push origin v1.0.0
```

Expected: Release workflow triggers and creates GitHub release

---

## Task 10: Publish to GitHub Marketplace

**Files:**
- N/A (GitHub UI steps)

**Step 1: Verify action works in published repository**

Create a test workflow in another repository:

```yaml
name: Test Published Action

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - run: |
          mkdir allure-results
          echo '{"uuid":"test","name":"Test","status":"passed","stage":"finished"}' > allure-results/test.json

      - uses: yourusername/allure-v3-report-action@v1
        with:
          allure_results: allure-results
          allure_history: allure-history
```

Expected: Action runs successfully from published repository

**Step 2: Publish to marketplace**

In GitHub repository settings:
1. Go to repository homepage
2. Click "Draft a release" (or use existing v1.0.0 release)
3. Check "Publish this Action to the GitHub Marketplace"
4. Select primary category: "Testing"
5. Add secondary category: "Code Quality"
6. Verify action.yml has proper branding
7. Publish release

**Step 3: Verify marketplace listing**

Navigate to: https://github.com/marketplace/actions/allure-v3-report-with-history

Expected:
- Action appears in marketplace
- README renders correctly
- Branding icon shows
- Installation instructions visible

**Step 4: Create announcement**

Post in:
- GitHub Discussions (if enabled)
- Issue #74 on simple-elf/allure-report-action
- Social media / dev communities

Template:
```markdown
ðŸŽ‰ **Allure v3 Report Action** is now available!

A production-ready GitHub Action for generating Allure v3 reports with history tracking.

âœ¨ **Features:**
- Allure v3 (latest npm version)
- History tracking
- GitHub Pages integration
- Multiple reports support
- Small Docker image (~150MB)

ðŸš€ **Get started:**
https://github.com/yourusername/allure-v3-report-action

ðŸ“¦ **Marketplace:**
https://github.com/marketplace/actions/allure-v3-report-with-history
```

**Step 5: Update issue #74**

Comment on https://github.com/simple-elf/allure-report-action/issues/74:

```markdown
I've created a standalone Allure v3 action while waiting for feedback on this proposal:

ðŸ”— **Repository:** https://github.com/yourusername/allure-v3-report-action
ðŸ“¦ **Marketplace:** https://github.com/marketplace/actions/allure-v3-report-with-history

It's production-ready and supports all the features discussed in this issue. Happy to contribute the code back here if maintainers are interested!
```

---

## Post-Implementation Checklist

### Repository Setup
- âœ… Code committed to GitHub
- âœ… README with clear documentation
- âœ… LICENSE file (MIT)
- âœ… CONTRIBUTING guide
- âœ… Example workflows
- âœ… Test workflow passing

### Docker & Action
- âœ… Dockerfile builds successfully
- âœ… Allure v3 installed correctly
- âœ… Entrypoint script works
- âœ… action.yml properly configured
- âœ… All inputs documented

### Testing
- âœ… Local Docker test passes
- âœ… GitHub Actions workflow test passes
- âœ… History management works
- âœ… Multiple runs create trends
- âœ… Subfolder support works
- âœ… Report cleanup works

### Documentation
- âœ… README.md complete
- âœ… USAGE.md with all parameters
- âœ… EXAMPLES.md with real scenarios
- âœ… CHANGELOG.md started
- âœ… Code comments added

### Marketplace
- âœ… Released on GitHub (v1.0.0)
- âœ… Published to marketplace
- âœ… Verified listing appears
- âœ… Installation instructions work

### Community
- âœ… Announcement posted
- âœ… Issue #74 updated
- âœ… Ready for user feedback

---

## Maintenance Plan

### Regular Updates
1. **Monthly**: Check for new Allure v3 releases
2. **Quarterly**: Update Node.js base image
3. **As needed**: Address user issues and feature requests

### Update Process
1. Update `ARG ALLURE_VERSION` in Dockerfile
2. Test with new version locally
3. Update CHANGELOG.md
4. Create new release tag
5. Verify marketplace listing updates

### Monitoring
- Watch GitHub Issues for bug reports
- Check Dependabot alerts
- Monitor Docker image security advisories
- Track Allure v3 compatibility changes

---

## Success Metrics

Track after 30 days:
- GitHub stars: Target 50+
- Marketplace installs: Target 100+
- Issues opened: Track resolution time
- Documentation views
- Fork count

---

## Future Enhancements

### Phase 2 (v1.1.0)
- Support for Allure plugins configuration
- Custom theme support
- Report aggregation from multiple sources
- Slack/email notifications integration

### Phase 3 (v1.2.0)
- Performance metrics tracking
- Comparison with baseline runs
- Automatic flaky test detection
- Integration with test management tools

### Phase 4 (v2.0.0)
- Self-hosted report server option
- Advanced analytics dashboard
- CI/CD pipeline insights
- Cost tracking and optimization
